<ion-header no-border>

    <ion-navbar>
        <ion-title>
            {{currentDevice.name}}
        </ion-title>
        <ion-buttons end>
          <button ion-button icon-only (click)="openSettings();">
            <ion-icon color="light" name="settings"></ion-icon>
          </button>
        </ion-buttons>
    </ion-navbar>

</ion-header>
<ion-content>
    <div id="trx-device-sensors" class="trx-height-2-3">

        <table style="height: 25%;">
            <tr>
                <td colspan="2" style="width: 50%; text-align: center;">
                    <div class="trx-distance-sensor-wrapper">
                        <div class="trx-half-circle"></div>
                        <div class="trx-half-circle first"></div>
                        <div class="trx-half-circle second"></div>
                        <div class="trx-half-circle third"></div>
                        <div class="trx-half-circle fourth"></div>
                    </div>

                </td>
                <td colspan="2" style="width: 50%; text-align: center;">
                    <div class="trx-distance-sensor-wrapper" style="transform: rotate(67.5deg);">
                        <div class="trx-half-circle"></div>
                        <div class="trx-half-circle first"></div>
                        <div class="trx-half-circle second"></div>
                        <div class="trx-half-circle third"></div>
                        <div class="trx-half-circle fourth"></div>
                    </div>
                </td>
            </tr>
        </table>
        <table style="height: 70%;">
            <tr>
                <td>&nbsp;</td>
                <td colspan="2" rowspan="2" id="trx-device-body">

                    <div id="trx-ir-sensors-wrapper">
                        <div class="trx-ir-sensor">
                            <span class="trx-ir-sensor-value">0</span>
                        </div>
                        <div class="trx-ir-sensor active">
                            <span class="trx-ir-sensor-value">0</span>
                        </div>
                        <div class="trx-ir-sensor">
                            <span class="trx-ir-sensor-value">0</span>
                        </div>
                        <div class="trx-ir-sensor">
                            <span class="trx-ir-sensor-value">0</span>
                        </div>
                        <div class="trx-ir-sensor">
                            <span class="trx-ir-sensor-value">0</span>
                        </div>
                    </div>


                    <div id="trx-program-list">
                        <button (click)="presentProgramList()" ion-button color="light" small outline>CARGAR PROGRAMA</button>
                        <div id="trx-program-action" *ngIf="currentAction !== null">
                            <div style="padding: 7px 0;">{{currentAction}}</div>
                            <button (click)="stopCurrentProgram()" ion-button icon-only outline round color="light" small>
                                <ion-icon name="square" color="light"></ion-icon>
                            </button>
                        </div>
                    </div>
                </td>
                <td>&nbsp;</td>
            </tr>
            <tr>
                <td style="text-align: right; width: 15%; vertical-align: bottom;">
                    <div class="trx-tires-wrapper">
                        <div class="trx-tire">
                            <div class="trx-tire-value">100</div>
                            <div class="trx-tire-unit">%</div>
                        </div>
                    </div>
                </td>
                <td style="text-align: left; width: 15%; vertical-align: bottom;">
                    <div class="trx-tires-wrapper">
                        <div class="trx-tire">
                            <div class="trx-tire-value">-100</div>
                            <div class="trx-tire-unit">%</div>
                        </div>
                    </div>
                </td>
            </tr>
        </table>

    </div>
    <div id="trx-control-wrapper" class="trx-height-1-3">
        <ion-grid style="height: 100%;">
            <ion-row align-items-center style="height: 100%;">
                <ion-col col-6 style="height: 100%;">
                    <div id="trx-joystick"></div>
                </ion-col>
                <ion-col>
                    <div style="text-align: right;">
                        <a (touchstart)="soundBuzzer()" (touchend)="onBuzzerStop()" class="trx-round-button" [class.active]="currentBuzzerStatus ? true: null">
                            <i class="flaticon-horn" style="font-size: 5rem;"></i>
                        </a>
                    </div>
                    <div style="text-align: left;">
                        <a (click)="toggleLights()" class="trx-round-button" [class.active]="currentLightStatus ? true: null">
                            <i class="flaticon-light-bulb" style="font-size: 5rem;"></i>
                        </a>
                    </div>
                </ion-col>
                <ion-col col-1 style="text-align: right;">

                    <div class="trx-speed-control">
                        <div>
                            <a (click)="increaseSpeed()">
                                <i class="flaticon-plus-symbol" style="font-size: 2rem;"></i>
                            </a>
                        </div>
                        <div id="trx-speedometer-wrapper">

                            <div id="trx-speedometer-placeholder">

                            </div>
                            <div id="trx-speedometer-speed-wrapper" [style.height.%]="currentSpeed * 10" [style.transition]="this.speedInterval ? 'none': null">
                                <div id="trx-speedometer">

                                </div>
                            </div>
                            <div class="slider-wrapper">
                                <input type="range" min="0" max="10" step="any" [(ngModel)]="currentSpeed" (input)="startedChangingSpeed($event)" (change)="stoppedChangingSpeed($event)"
                                    (onblur)="stoppedChangingSpeed($event)">
                            </div>
                        </div>
                        <div>
                            <a (click)="decreaseSpeed()">
                                <i class="flaticon-minus-symbol" style="font-size: 1.75rem;"></i>
                            </a>
                        </div>
                        <div>
                            <i class="flaticon-speedometer" style="font-size: 3rem;"></i>
                        </div>

                    </div>
                </ion-col>
            </ion-row>
        </ion-grid>
    </div>
</ion-content>